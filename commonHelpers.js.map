{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const formRef = document.querySelector('.form');\n\nexport function getImg() {\n  const API_KEY = '42059071-0978dc0d7158b742eee7c30f5';\n  const BASE_URL = 'https://pixabay.com/api/';\n  const query = formRef.elements.input.value;\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true,`;\n\n  fetch(url)\n    .then(resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n      return resp.json();\n    })\n    .then(data => {\n      if (data.hits.length === 0 || query === '') {\n        iziToast.error({\n          title: '',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'bottomLeft',\n          maxWidth: 360,\n        });\n      }\n    });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImg } from './js/pixabay-api';\nimport { renderImg } from './js/render-functions';\n\nconst containerRef = document.querySelector('.container');\nconst formRef = document.querySelector('.form');\nconst galRef = document.querySelector('.gallery');\n\nformRef.addEventListener('submit', onSubmit);\n\nfunction onSubmit(ev) {\n  ev.preventDefault();\n\n  loaderOn();\n\n  galRef.innerHTML = '';\n\n  const API_KEY = '42059071-0978dc0d7158b742eee7c30f5';\n  const BASE_URL = 'https://pixabay.com/api/';\n  const query = formRef.elements.input.value;\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true,`;\n\n  fetch(url)\n    .then(resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n      return resp.json();\n    })\n    .then(data => {\n      if (data.hits.length === 0 || query === '') {\n        iziToast.error({\n          title: '',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'bottomLeft',\n          maxWidth: 360,\n        });\n        formRef.reset();\n      } else {\n        const markup = data.hits\n          .map(\n            ({\n              webformatURL,\n              largeImageURL,\n              tags,\n              likes,\n              views,\n              comments,\n              downloads,\n            }) => {\n              return `<a class=\"gallery-link \"href=\"${largeImageURL}\"\n          ><li>\n            <img class=\"gallery-item \"src=\"${webformatURL}\" alt=\"${tags}\" />\n            <p>Likes: ${likes}</p>\n            <p>Views: ${views}</p>\n            <p>Comments: ${comments}</p>\n            <p>Downloads: ${downloads}</p></li\n        ></a>`;\n            }\n          )\n          .join('');\n        galRef.insertAdjacentHTML('beforeend', markup);\n\n        lightbox.refresh();\n        formRef.reset();\n      }\n    })\n    .catch(error => {\n      console.log(error);\n    })\n    .finally(() => {\n      loaderOff();\n    });\n}\n\nfunction loaderOn() {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  containerRef.append(loader);\n}\nfunction loaderOff() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n};\nconst lightbox = new SimpleLightbox('.gallery a', options);\nlightbox.on('show.simplelightbox');\n"],"names":["containerRef","formRef","galRef","onSubmit","ev","loaderOn","API_KEY","BASE_URL","query","url","resp","data","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","error","loaderOff","loader","options","SimpleLightbox"],"mappings":"6vBAAgB,SAAS,cAAc,OAAO,ECQ9C,MAAMA,EAAe,SAAS,cAAc,YAAY,EAClDC,EAAU,SAAS,cAAc,OAAO,EACxCC,EAAS,SAAS,cAAc,UAAU,EAEhDD,EAAQ,iBAAiB,SAAUE,CAAQ,EAE3C,SAASA,EAASC,EAAI,CACpBA,EAAG,eAAc,EAEjBC,IAEAH,EAAO,UAAY,GAEnB,MAAMI,EAAU,qCACVC,EAAW,2BACXC,EAAQP,EAAQ,SAAS,MAAM,MAC/BQ,EAAM,GAAGF,CAAQ,QAAQD,CAAO,MAAM,mBAC1CE,CACD,CAAA,4DAED,MAAMC,CAAG,EACN,KAAKC,GAAQ,CACZ,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAClB,CAAK,EACA,KAAKC,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,GAAKH,IAAU,GACtCI,EAAS,MAAM,CACb,MAAO,GACP,QACE,2EACF,SAAU,aACV,SAAU,GACpB,CAAS,EACDX,EAAQ,MAAK,MACR,CACL,MAAMY,EAASF,EAAK,KACjB,IACC,CAAC,CACC,aAAAG,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACd,IACqB,iCAAiCL,CAAa;AAAA;AAAA,6CAEtBD,CAAY,UAAUE,CAAI;AAAA,wBAC/CC,CAAK;AAAA,wBACLC,CAAK;AAAA,2BACFC,CAAQ;AAAA,4BACPC,CAAS;AAAA,cAG1B,EACA,KAAK,EAAE,EACVlB,EAAO,mBAAmB,YAAaW,CAAM,EAE7CQ,EAAS,QAAO,EAChBpB,EAAQ,MAAK,CACd,CACP,CAAK,EACA,MAAMqB,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,EACA,QAAQ,IAAM,CACbC,GACN,CAAK,CACL,CAEA,SAASlB,GAAW,CAClB,MAAMmB,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAC7BxB,EAAa,OAAOwB,CAAM,CAC5B,CACA,SAASD,GAAY,CACnB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACFA,EAAO,OAAM,CAEjB,CACA,MAAMC,EAAU,CACd,SAAU,GACV,gBAAiB,MACjB,aAAc,MACd,gBAAiB,SACjB,UAAW,GACb,EACMJ,EAAW,IAAIK,EAAe,aAAcD,CAAO,EACzDJ,EAAS,GAAG,qBAAqB"}